# Another Graph Editor

<p align="center">
  简体中文 | <a href="README.md">English</a>
</p>

这是一个受 [CS Academy 图形编辑器](https://csacademy.com/app/graph_editor/) 启发的图形编辑器，专为竞赛编程设计。

使用 React、Typescript、Tailwind CSS 和 HTML Canvas 构建。

<p align="center">
    <img src="screenshots/main.png?" />
</p>

<p align="center">
<em>多连通分量的图的示例</em>
</p>

## 功能

- 常见输入格式：
  - 边列表 `u v [w]`，表示从节点 `u` 到节点 `v` 的一条边，其中 `w` 是可选的边标签。
  - Leetcode 风格的邻接列表字符串，如 `[[2,4],[1,3],[2,1],[4,3]]`；确保字符串内部**不要**包含空格。
  - 父子数组，其中 `p[i]` 和 `c[i]` 表示从节点 `p[i]` 到 `c[i]` 的边。
  - 假设节点数非零，你还可以标记每个节点。这在你有一个数组 `a` 时很有用，`a[i]` 对应节点 `i` 的值（只需将给定数组复制并粘贴到 **节点标签** 部分）。
- 标签偏移（用于将零索引输入转换为一索引，反之亦然）
- 暗黑/亮色主题
- 无向图/有向图
- 普通/树/二分图模式
- 锁定模式（固定标记的节点位置）
- 桥和割点
- （强连通）分量
- 最小生成树
- 支持多重边
- 支持多测试用例

<p align="center">
    <img src="screenshots/parentChild.png?" />
</p>

<p align="center">
<em>父-子输入格式示例</em>
</p>

<p align="center">
    <img src="screenshots/leetcode.png?" />
</p>

<p align="center">
<em>Leetcode 风格的邻接列表也适用于边</em>
</p>

> [!NOTE]
> *树模式* 和 *桥* 仅适用于无向图。

## 使用方法

根据需要调整输入格式，然后开始输入！

> [!IMPORTANT]
> 如果你来自像 [Codeforces](https://codeforces.com/) 这样的平台，且输入数据包含 `n m`，分别表示顶点数和边数，请在复制测试用例数据时**省略**这部分内容。
> 同样，如果你有一个数组 `p`，其中 `p[i]` 表示 `i` 的父节点，请确保父节点数组和子节点数组匹配。

> [!TIP]
> 若要输入单个节点，输入 `u` 或 `u u`。

> [!TIP]
> 在输入节点标签时，如果你想跳过某个节点，使用字符 `_` 作为占位符。

## 处理多个测试用例/图

要添加一个新的测试用例，点击绿色按钮添加一个新“标签”。你可以将每个测试用例输入到各自的标签中。要删除标签，将鼠标悬停在目标标签上片刻，会显示一个红色的叉号。点击叉号即可删除该标签。

> [!CAUTION]
> 删除标签后，该标签内的所有图数据将被删除，请小心操作。

## 节点着色

使用位于主画布上方的调色板，你可以选择颜色，并点击节点后，节点将变为你选择的颜色。

> [!CAUTION]
> 你的颜色将覆盖由 *连通分量* 或 *二分图模式* 产生的颜色。

调色板左上角的圆形按钮将光标重置为正常模式，而下面的红色圆圈则清除任何已着色的节点。

## 配置

有两种配置方式：**常规** 和 **外观**，前者处理主要的“模式”，后者让你控制图形的渲染方式。

### 常规

#### 连通分量
此模式显示图的连通分量。

> [!NOTE]
> 对于有向图，**强连通分量** 会被显示。

连通分量通过不同的颜色进行区分。

#### 桥和割点

*桥* 是指移除后会增加图的连通分量的边。*割点*（也称为关节点）定义类似。

桥接通过两条平行线表示，而割点则采用六边形形状。

#### 最小生成树（森林）

如果提供了*所有*边的权重，并且它们为数值类型，则此模式可用。对于每个分量，计算最小生成树，最小生成树中的边会加粗显示。

<p align="center">
    <img src="screenshots/mst.png?" />
</p>

<p align="center">
<em>最小生成树</em>
</p>

#### 树模式

在此模式下，输入数据中的*第一个*节点成为根节点。节点根据它们在树层次中的位置进行排列，以便更易于可视化。

<p align="center">
    <img src="screenshots/twoRootBefore.png?" />
</p>

<p align="center">
<em>节点1是原根节点</em>
</p>

要设置某个任意的根节点（例如节点2），在 *根节点* 部分输入 `2`，它就会成为树的根。如果有多个树，只需输入逗号分隔的所有根节点。如果输入的两个节点属于同一棵树，那么输入顺序较前的节点会作为根节点，即若输入 `2 1`，节点2为根；若输入 `1 2`，则节点1为根。

<p align="center">
    <img src="screenshots/twoRootAfter.png?" />
</p>

<p align="center">
<em>节点2是新的根节点</em>
</p>

如果图不是树呢？则会显示 **DFS 树**，其中 *反向边（回边）* 以虚线表示。

<p align="center">
    <img src="screenshots/dfsTree.png?" />
</p>

<p align="center">
<em>显示桥和割点的 DFS 树</em>
</p>

#### 二分图模式

也可以显示二分图。每个不相交的集合中的节点都会被着色（和定位）得不同。

<p align="center">
    <img src="screenshots/bipartite.png?" />
</p>

<p align="center">
<em>二分图示例</em>
</p>

> [!CAUTION]
> 启用时，*树模式* 和 *连通分量* 会被*关闭*。反过来也是一样，当启用 *树模式* 或 *分量* 时，*二分图模式* 会关闭。

> [!TIP]
> 如果图不是二分图，则此模式不可用。

#### 锁定模式

默认情况下，图处于 *力学模式*，即边将节点联系在一起，而节点相互排斥，形成类似太空的效果。要禁用此行为，只需切换到 *锁定模式*。

#### 点击标记/取消标记节点

启用后，你可以通过点击节点来 *标记* 它们。这些节点会有双重边框。

> [!TIP]
> 如果你更喜欢给节点上色，可能需要禁用此功能。

#### 固定模式

如果你希望固定 *标记的节点* 位置，请启用 *固定模式*。

#### 多重边模式

此模式允许在两个节点之间有多条边，默认启用。当禁用时，不论输入多少次相同的边，只会注册一条。

### 外观

除了暗黑/亮色主题，还有多个滑块可以调整节点半径、字体大小等参数。你的设置会在刷新后保存在 `localStorage` 中。

## 致谢

- [CS Academy 的 Graph Editor](https://csacademy.com/app/graph_editor/)
- [Codeforces](https://codeforces.com/)
- [Atcoder](https://atcoder.jp/)
- [USACO Guide](https://usaco.guide/)
- [-is-this-fft- 的 DFS 树博客](https://codeforces.com/blog/entry/68138)
